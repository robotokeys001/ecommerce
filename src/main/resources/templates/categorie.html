<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Gestione Categorie</title>
</head>
<body>
    <h1>Gestione Categorie</h1>

    <div th:if="${successMessage}" class="success">
        <p th:text="${successMessage}"></p>
    </div>
    <div th:if="${errorMessage}" class="error">
        <p th:text="${errorMessage}"></p>
    </div>

    <h2>Aggiungi Nuova Categoria</h2>
    <form th:action="@{/admin/categorie}" method="post">
        <div>
            <label for="nomecategoria">Nome Categoria:</label>
            <input type="text" id="nomecategoria" name="nomecategoria" required="required"/>
        </div>
        <button type="submit">Aggiungi Categoria</button>
    </form>

    <h2>Elenco Categorie</h2>
    <div th:if="${categoria == null or categoria.isEmpty()}">
        <p>Nessuna categoria disponibile.</p>
    </div>
    <div th:unless="${categoria == null or categoria.isEmpty()}">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome Categoria</th>
                    <th>Azioni</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="cat : ${categoria}">
                    <td th:text="${cat.categorieId}">ID</td>
                    <td th:text="${cat.nomeCategorie}">Nome</td>
                    <td>
                        <form th:action="@{/admin/categorie/update}" method="get">
                            <input type="hidden" name="categoryid" th:value="${cat.categorieId}" />
                            <label for="nome">Nuovo Nome:</label>
                            <input type="text" name="nome" th:value="${cat.nomeCategorie}" required="required"/>
                            <button type="submit">Aggiorna</button>
                        </form>
                        <form th:action="@{/admin/categorie/delete}" method="get">
                            <input type="hidden" name="id" th:value="${cat.categorieId}" />
                            <button type="submit" onclick="return confirm('Sei sicuro di voler eliminare questa categoria?')">Elimina</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <p><a th:href="@{/admin/dashboard}">Torna alla Dashboard</a></p>
</body>
</html>